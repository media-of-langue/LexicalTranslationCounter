WARN[0000] The "LANGUAGE" variable is not set. Defaulting to a blank string. 
WARN[0000] The "LC_ALL" variable is not set. Defaulting to a blank string. 
WARN[0000] The "TZ" variable is not set. Defaulting to a blank string. 
WARN[0000] /Users/komuramakoto/記録/MOL/LexicalTranslationCounter/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Building 1.8s (9/9) FINISHED                                                                                                                         docker:desktop-linux
 => [ltc internal] load build definition from Dockerfile                                                                                                                 0.0s
 => => transferring dockerfile: 1.27kB                                                                                                                                   0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG mediaoflangue/wordlist_${LA1}:latest results in empty or invalid base image name (line 3)                       0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG mediaoflangue/wordlist_${LA2}:latest results in empty or invalid base image name (line 4)                       0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG mediaoflangue/corpus_${LA1}_${LA2}:latest results in empty or invalid base image name (line 5)                  0.0s
 => CANCELED [ltc internal] load metadata for docker.io/nvidia/cuda:11.6.2-base-ubuntu20.04                                                                              1.8s
 => CANCELED [ltc internal] load metadata for docker.io/mediaoflangue/corpus_en_it:latest                                                                                1.8s
 => ERROR [ltc internal] load metadata for docker.io/mediaoflangue/wordlist_it:latest                                                                                    1.8s
 => CANCELED [ltc internal] load metadata for docker.io/mediaoflangue/wordlist_en:latest                                                                                 1.8s
 => [ltc auth] mediaoflangue/corpus_en_it:pull token for registry-1.docker.io                                                                                            0.0s
 => [ltc auth] mediaoflangue/wordlist_it:pull token for registry-1.docker.io                                                                                             0.0s
 => [ltc auth] mediaoflangue/wordlist_en:pull token for registry-1.docker.io                                                                                             0.0s
 => [ltc auth] nvidia/cuda:pull token for registry-1.docker.io                                                                                                           0.0s
------
 > [ltc internal] load metadata for docker.io/mediaoflangue/wordlist_it:latest:
------
failed to solve: mediaoflangue/wordlist_it:latest: failed to resolve source metadata for docker.io/mediaoflangue/wordlist_it:latest: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed
komuramakoto@mitsumuramakotonoMacBook-Air ~/記録/MOL/LexicalTranslationCounter % docker search mediaoflangue/wordlist_it

NAME                         DESCRIPTION   STARS     OFFICIAL
mediaoflangue/wordlist_en                  0         
mediaoflangue/wordlist_fr                  0         
mediaoflangue/wordlist_de                  0         
mediaoflangue/corpus_en_fr                 0         
mediaoflangue/wordlist_ja                  0         
mediaoflangue/corpus_de_en                 0         
mediaoflangue/corpus_en_ja                 0         
mediaoflangue/corpus_en_ko                 0         
mediaoflangue/corpus_en_zh                 0         
mediaoflangue/wordlist_zh                  0         
mediaoflangue/wordlist_ko                  0         
mediaoflangue/corpus_fr_ja                 0         
mediaoflangue/data_en_ja                   0         
mediaoflangue/corpus_en_es                 0         
mediaoflangue/wordlist_es                  0         
komuramakoto@mitsumuramakotonoMacBook-Air ~/記録/MOL/LexicalTranslationCounter % docker-compose build --build-arg "LA1=en" --build-arg "LA2=it" && docker compose up -d
WARN[0000] The "LANGUAGE" variable is not set. Defaulting to a blank string. 
WARN[0000] The "LC_ALL" variable is not set. Defaulting to a blank string. 
WARN[0000] The "TZ" variable is not set. Defaulting to a blank string. 
WARN[0000] /Users/komuramakoto/記録/MOL/LexicalTranslationCounter/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Building 232.6s (29/32)                                                                                                                              docker:desktop-linux
 => [ltc internal] load build definition from Dockerfile                                                                                                                 0.0s
 => => transferring dockerfile: 1.25kB                                                                                                                                   0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG mediaoflangue/wordlist_${LA1}:latest results in empty or invalid base image name (line 3)                       0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG aaakmn/wordlist_${LA2}:latest results in empty or invalid base image name (line 4)                              0.0s
 => WARN: InvalidDefaultArgInFrom: Default value for ARG aaakmn/corpus_${LA1}_${LA2}:latest results in empty or invalid base image name (line 5)                         0.0s
 => [ltc internal] load metadata for docker.io/nvidia/cuda:11.6.2-base-ubuntu20.04                                                                                       1.5s
 => [ltc internal] load metadata for docker.io/mediaoflangue/wordlist_en:latest                                                                                          2.5s
 => [ltc internal] load metadata for docker.io/aaakmn/wordlist_it:latest                                                                                                 0.0s
 => [ltc internal] load metadata for docker.io/aaakmn/corpus_en_it:latest                                                                                                1.8s
 => [ltc auth] nvidia/cuda:pull token for registry-1.docker.io                                                                                                           0.0s
 => [ltc auth] mediaoflangue/wordlist_en:pull token for registry-1.docker.io                                                                                             0.0s
 => [ltc auth] aaakmn/corpus_en_it:pull token for registry-1.docker.io                                                                                                   0.0s
 => [ltc internal] load .dockerignore                                                                                                                                    0.0s
 => => transferring context: 2B                                                                                                                                          0.0s
 => [ltc wordlist1 1/1] FROM docker.io/mediaoflangue/wordlist_en:latest@sha256:7c56e5a8ca435500e56005aae4333648bc1de8e6e3d8935baf451c86e9caf76a                          0.0s
 => [ltc wordlist2 1/1] FROM docker.io/aaakmn/wordlist_it:latest                                                                                                         0.0s
 => [ltc corpus 1/1] FROM docker.io/aaakmn/corpus_en_it:latest@sha256:a127ec5d213021c08d10b7289800607c5f74becf2f7172cb826d23063e202ea0                                   0.0s
 => [ltc internal] load build context                                                                                                                                    0.2s
 => => transferring context: 22.38MB                                                                                                                                     0.2s
 => [ltc stage-3  1/19] FROM docker.io/nvidia/cuda:11.6.2-base-ubuntu20.04@sha256:a0dd581afdbf82ea9887dd077aebf9723aba58b51ae89acb4c58b8705b74179b                       0.0s
 => CACHED [ltc stage-3  2/19] COPY --from=wordlist1 /src/data/input/wordlist* /root/src/data/input/                                                                     0.0s
 => CACHED [ltc stage-3  3/19] COPY --from=wordlist2 /src/data/input/wordlist* /root/src/data/input/                                                                     0.0s
 => CACHED [ltc stage-3  4/19] COPY --from=corpus /src/data/input/corpus* /root/src/data/input/                                                                          0.0s
 => CACHED [ltc stage-3  5/19] RUN export LC_ALL=C.UTF-8                                                                                                                 0.0s
 => CACHED [ltc stage-3  6/19] RUN export LANG=C.UTF-8                                                                                                                   0.0s
 => [ltc stage-3  7/19] COPY ./shell_scripts/basis ./basis/                                                                                                              0.1s
 => [ltc stage-3  8/19] COPY ./shell_scripts/en ./en/                                                                                                                    0.0s
 => [ltc stage-3  9/19] COPY ./shell_scripts/it ./it/                                                                                                                    0.0s
 => [ltc stage-3 10/19] COPY ./shell_scripts/en-it ./en-it                                                                                                               0.0s
 => [ltc stage-3 11/19] RUN apt-get update -y &&     apt-get upgrade -y &&     apt-get install -y     locales     locales-all     g++     default-jdk &&     locale-g  151.6s
 => [ltc stage-3 12/19] RUN apt-get install -y python3 python3-pip                                                                                                      30.8s
 => [ltc stage-3 13/19] RUN pip3 install --upgrade pip                                                                                                                   2.2s
 => [ltc stage-3 14/19] RUN cd ./basis/ && sh ./install.sh                                                                                                              19.1s
 => [ltc stage-3 15/19] RUN cd /en && sh ./install.sh                                                                                                                    2.6s
 => ERROR [ltc stage-3 16/19] RUN cd /it && sh ./install.sh                                                                                                             23.2s
------
 > [ltc stage-3 16/19] RUN cd /it && sh ./install.sh:
0.143 ./install.sh: 1: AVA_HOME: not found
0.176 Reading package lists...
0.855 Building dependency tree...
0.991 Reading state information...
1.127 openjdk-11-jre is already the newest version (11.0.25+9-1ubuntu1~20.04).
1.127 openjdk-11-jre set to manually installed.
1.127 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
1.332 Requirement already satisfied: nltk in /usr/local/lib/python3.8/dist-packages (from -r ./requirements.txt (line 1)) (3.9.1)
1.384 Collecting pyknp (from -r ./requirements.txt (line 2))
1.416   Downloading pyknp-0.6.1-py3-none-any.whl.metadata (1.8 kB)
1.424 Requirement already satisfied: django-environ in /usr/local/lib/python3.8/dist-packages (from -r ./requirements.txt (line 3)) (0.11.2)
1.447 Collecting konlpy (from -r ./requirements.txt (line 4))
1.463   Downloading konlpy-0.6.0-py2.py3-none-any.whl.metadata (1.9 kB)
1.477 Requirement already satisfied: click in /usr/local/lib/python3.8/dist-packages (from nltk->-r ./requirements.txt (line 1)) (8.1.7)
1.477 Requirement already satisfied: joblib in /usr/local/lib/python3.8/dist-packages (from nltk->-r ./requirements.txt (line 1)) (1.4.2)
1.477 Requirement already satisfied: regex>=2021.8.3 in /usr/local/lib/python3.8/dist-packages (from nltk->-r ./requirements.txt (line 1)) (2024.11.6)
1.478 Requirement already satisfied: tqdm in /usr/local/lib/python3.8/dist-packages (from nltk->-r ./requirements.txt (line 1)) (4.67.1)
1.478 Requirement already satisfied: six in /usr/local/lib/python3.8/dist-packages (from pyknp->-r ./requirements.txt (line 2)) (1.17.0)
1.697 Collecting JPype1>=0.7.0 (from konlpy->-r ./requirements.txt (line 4))
1.884   Downloading jpype1-1.5.1-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl.metadata (4.9 kB)
2.098 Collecting lxml>=4.1.0 (from konlpy->-r ./requirements.txt (line 4))
2.109   Downloading lxml-5.3.0-cp38-cp38-manylinux_2_28_aarch64.whl.metadata (3.8 kB)
2.115 Requirement already satisfied: numpy>=1.6 in /usr/local/lib/python3.8/dist-packages (from konlpy->-r ./requirements.txt (line 4)) (1.24.4)
2.141 Collecting packaging (from JPype1>=0.7.0->konlpy->-r ./requirements.txt (line 4))
2.149   Downloading packaging-24.2-py3-none-any.whl.metadata (3.2 kB)
2.170 Downloading pyknp-0.6.1-py3-none-any.whl (42 kB)
2.188 Downloading konlpy-0.6.0-py2.py3-none-any.whl (19.4 MB)
3.540    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 19.4/19.4 MB 14.4 MB/s eta 0:00:00
3.552 Downloading jpype1-1.5.1-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (466 kB)
3.585 Downloading lxml-5.3.0-cp38-cp38-manylinux_2_28_aarch64.whl (4.8 MB)
3.803    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.8/4.8 MB 22.3 MB/s eta 0:00:00
3.819 Downloading packaging-24.2-py3-none-any.whl (65 kB)
3.888 Installing collected packages: pyknp, packaging, lxml, JPype1, konlpy
4.239 Successfully installed JPype1-1.5.1 konlpy-0.6.0 lxml-5.3.0 packaging-24.2 pyknp-0.6.1
4.240 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
4.706 Collecting spacy
4.741   Downloading spacy-3.8.2.tar.gz (1.3 MB)
4.827      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.3/1.3 MB 19.0 MB/s eta 0:00:00
5.040   Installing build dependencies: started
22.35   Installing build dependencies: finished with status 'error'
22.38   error: subprocess-exited-with-error
22.38   
22.38   × pip subprocess to install build dependencies did not run successfully.
22.38   │ exit code: 1
22.38   ╰─> [92 lines of output]
22.38       Ignoring numpy: markers 'python_version >= "3.9"' don't match your environment
22.38       Collecting setuptools
22.38         Downloading setuptools-75.3.0-py3-none-any.whl.metadata (6.9 kB)
22.38       Collecting cython<3.0,>=0.25
22.38         Downloading Cython-0.29.37-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.manylinux_2_24_aarch64.whl.metadata (3.1 kB)
22.38       Collecting cymem<2.1.0,>=2.0.2
22.38         Downloading cymem-2.0.10.tar.gz (10 kB)
22.38         Installing build dependencies: started
22.38         Installing build dependencies: finished with status 'done'
22.38         Getting requirements to build wheel: started
22.38         Getting requirements to build wheel: finished with status 'done'
22.38         Preparing metadata (pyproject.toml): started
22.38         Preparing metadata (pyproject.toml): finished with status 'done'
22.38       Collecting preshed<3.1.0,>=3.0.2
22.38         Downloading preshed-3.0.9-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl.metadata (2.2 kB)
22.38       Collecting murmurhash<1.1.0,>=0.28.0
22.38         Downloading murmurhash-1.0.11.tar.gz (13 kB)
22.38         Installing build dependencies: started
22.38         Installing build dependencies: finished with status 'done'
22.38         Getting requirements to build wheel: started
22.38         Getting requirements to build wheel: finished with status 'done'
22.38         Preparing metadata (pyproject.toml): started
22.38         Preparing metadata (pyproject.toml): finished with status 'done'
22.38       Collecting thinc<8.4.0,>=8.3.0
22.38         Downloading thinc-8.3.2.tar.gz (193 kB)
22.38         Installing build dependencies: started
22.38         Installing build dependencies: finished with status 'error'
22.38         error: subprocess-exited-with-error
22.38       
22.38         × pip subprocess to install build dependencies did not run successfully.
22.38         │ exit code: 1
22.38         ╰─> [50 lines of output]
22.38             Ignoring numpy: markers 'python_version >= "3.9"' don't match your environment
22.38             Collecting setuptools
22.38               Using cached setuptools-75.3.0-py3-none-any.whl.metadata (6.9 kB)
22.38             Collecting cython<3.0,>=0.25
22.38               Using cached Cython-0.29.37-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.manylinux_2_24_aarch64.whl.metadata (3.1 kB)
22.38             Collecting murmurhash<1.1.0,>=1.0.2
22.38               Using cached murmurhash-1.0.11.tar.gz (13 kB)
22.38               Installing build dependencies: started
22.38               Installing build dependencies: finished with status 'done'
22.38               Getting requirements to build wheel: started
22.38               Getting requirements to build wheel: finished with status 'done'
22.38               Preparing metadata (pyproject.toml): started
22.38               Preparing metadata (pyproject.toml): finished with status 'done'
22.38             Collecting cymem<2.1.0,>=2.0.2
22.38               Using cached cymem-2.0.10.tar.gz (10 kB)
22.38               Installing build dependencies: started
22.38               Installing build dependencies: finished with status 'done'
22.38               Getting requirements to build wheel: started
22.38               Getting requirements to build wheel: finished with status 'done'
22.38               Preparing metadata (pyproject.toml): started
22.38               Preparing metadata (pyproject.toml): finished with status 'done'
22.38             Collecting preshed<3.1.0,>=3.0.2
22.38               Using cached preshed-3.0.9-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl.metadata (2.2 kB)
22.38             Collecting blis<1.1.0,>=1.0.0
22.38               Downloading blis-1.0.2.tar.gz (3.6 MB)
22.38                  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.6/3.6 MB 8.7 MB/s eta 0:00:00
22.38               Installing build dependencies: started
22.38               Installing build dependencies: finished with status 'error'
22.38               error: subprocess-exited-with-error
22.38       
22.38               × pip subprocess to install build dependencies did not run successfully.
22.38               │ exit code: 1
22.38               ╰─> [7 lines of output]
22.38                   Collecting setuptools
22.38                     Using cached setuptools-75.3.0-py3-none-any.whl.metadata (6.9 kB)
22.38                   Collecting cython>=0.25
22.38                     Using cached Cython-3.0.11-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl.metadata (3.2 kB)
22.38                   ERROR: Ignored the following versions that require a different python version: 1.25.0 Requires-Python >=3.9; 1.25.1 Requires-Python >=3.9; 1.25.2 Requires-Python >=3.9; 1.26.0 Requires-Python <3.13,>=3.9; 1.26.1 Requires-Python <3.13,>=3.9; 1.26.2 Requires-Python >=3.9; 1.26.3 Requires-Python >=3.9; 1.26.4 Requires-Python >=3.9; 2.0.0 Requires-Python >=3.9; 2.0.1 Requires-Python >=3.9; 2.0.2 Requires-Python >=3.9; 2.1.0 Requires-Python >=3.10; 2.1.0rc1 Requires-Python >=3.10; 2.1.1 Requires-Python >=3.10; 2.1.2 Requires-Python >=3.10; 2.1.3 Requires-Python >=3.10; 2.2.0 Requires-Python >=3.10; 2.2.0rc1 Requires-Python >=3.10; 75.4.0 Requires-Python >=3.9; 75.5.0 Requires-Python >=3.9; 75.6.0 Requires-Python >=3.9
22.38                   ERROR: Could not find a version that satisfies the requirement numpy<3.0.0,>=2.0.0 (from versions: 1.3.0, 1.4.1, 1.5.0, 1.5.1, 1.6.0, 1.6.1, 1.6.2, 1.7.0, 1.7.1, 1.7.2, 1.8.0, 1.8.1, 1.8.2, 1.9.0, 1.9.1, 1.9.2, 1.9.3, 1.10.0.post2, 1.10.1, 1.10.2, 1.10.4, 1.11.0, 1.11.1, 1.11.2, 1.11.3, 1.12.0, 1.12.1, 1.13.0, 1.13.1, 1.13.3, 1.14.0, 1.14.1, 1.14.2, 1.14.3, 1.14.4, 1.14.5, 1.14.6, 1.15.0, 1.15.1, 1.15.2, 1.15.3, 1.15.4, 1.16.0, 1.16.1, 1.16.2, 1.16.3, 1.16.4, 1.16.5, 1.16.6, 1.17.0, 1.17.1, 1.17.2, 1.17.3, 1.17.4, 1.17.5, 1.18.0, 1.18.1, 1.18.2, 1.18.3, 1.18.4, 1.18.5, 1.19.0, 1.19.1, 1.19.2, 1.19.3, 1.19.4, 1.19.5, 1.20.0, 1.20.1, 1.20.2, 1.20.3, 1.21.0, 1.21.1, 1.21.2, 1.21.3, 1.21.4, 1.21.5, 1.21.6, 1.22.0, 1.22.1, 1.22.2, 1.22.3, 1.22.4, 1.23.0, 1.23.1, 1.23.2, 1.23.3, 1.23.4, 1.23.5, 1.24.0, 1.24.1, 1.24.2, 1.24.3, 1.24.4)
22.38                   ERROR: No matching distribution found for numpy<3.0.0,>=2.0.0
22.38                   [end of output]
22.38       
22.38               note: This error originates from a subprocess, and is likely not a problem with pip.
22.38             error: subprocess-exited-with-error
22.38       
22.38             × pip subprocess to install build dependencies did not run successfully.
22.38             │ exit code: 1
22.38             ╰─> See above for output.
22.38       
22.38             note: This error originates from a subprocess, and is likely not a problem with pip.
22.38             [end of output]
22.38       
22.38         note: This error originates from a subprocess, and is likely not a problem with pip.
22.38       error: subprocess-exited-with-error
22.38       
22.38       × pip subprocess to install build dependencies did not run successfully.
22.38       │ exit code: 1
22.38       ╰─> See above for output.
22.38       
22.38       note: This error originates from a subprocess, and is likely not a problem with pip.
22.38       [end of output]
22.38   
22.38   note: This error originates from a subprocess, and is likely not a problem with pip.
22.39 error: subprocess-exited-with-error
22.39 
22.39 × pip subprocess to install build dependencies did not run successfully.
22.39 │ exit code: 1
22.39 ╰─> See above for output.
22.39 
22.39 note: This error originates from a subprocess, and is likely not a problem with pip.
22.48 /usr/bin/python3: No module named spacy
------
failed to solve: process "/bin/sh -c cd /${LA2} && sh ./install.sh" did not complete successfully: exit code: 1

問題1: LANGUAGE, LC_ALL, TZ の環境変数が未設定
これらの警告は、Dockerコンテナが言語やタイムゾーン設定を認識できないために発生しています。これは通常、機能に大きな影響を与えませんが、明示的な設定を行うことで警告を解消できます。

解決方法:
docker-compose.yml に以下を追加してください：

yaml
コードをコピーする
environment:
  LANGUAGE: "en_US.UTF-8"
  LC_ALL: "C.UTF-8"
  TZ: "UTC"
問題2: version 属性が非推奨
docker-compose.yml の version 属性は、現在の Docker Compose では不要です。

解決方法:
version 行を docker-compose.yml から削除してください。

問題3: mediaoflangue/wordlist_it イメージが見つからない
docker-compose build 中に mediaoflangue/wordlist_it:latest が見つからずに失敗しています。

解決方法:
docker search の結果によると、mediaoflangue/wordlist_it は存在しないようです。その代わりに mediaoflangue/wordlist_en, mediaoflangue/wordlist_fr, などが見つかっています。
該当するイメージが存在しない場合、必要なイメージを作成するか、プロジェクトで使用するイメージの設定を確認してください。
docker-compose.yml の該当部分を編集し、実在するイメージに変更するか、カスタムイメージを構築してください。
問題4: AVA_HOME 環境変数が見つからない
RUN cd /it && sh ./install.sh の実行中に AVA_HOME が未設定であることが原因で失敗しています。

解決方法:
必要な環境変数 AVA_HOME を確認し、適切に設定します。
例として、docker-compose.yml に以下を追加:
yaml
コードをコピーする
environment:
  AVA_HOME: "/path/to/ava"
/path/to/ava は適切なパスに置き換えてください。
問題5: Python パッケージの依存関係エラー
特定の Python パッケージ（例: pyknp, konlpy）をインストールしようとしていますが、依存関係が正しく設定されていない可能性があります。

解決方法:
requirements.txt を確認し、全ての依存パッケージが明記されていることを確認してください。また、古いパッケージを手動でアップグレードする必要がある場合があります。

全体の流れに問題が多い場合、以下の手順でデバッグを進めるのが有効です：

個々の Dockerfile ステージを分けてビルドし、どの部分が失敗するかを確認する。
環境変数や依存関係を明確にし、適切な値を設定する。
必要な Docker イメージが不足している場合、それを作成または取得する。






